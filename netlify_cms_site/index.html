<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Super Market El Esparragal · Premium</title>
  <!-- La descripción se mantiene para SEO, incorpora las nuevas ofertas -->
  <meta name="description" content="Mini supermercado en El Esparragal: frescura, calidad y servicio de recogida de paquetes. Descubre nuestras ofertas semanales y productos premium." />
  <link rel="icon" href="/favicon.ico" />
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600;800&display=swap" rel="stylesheet" />
  <!-- FontAwesome solo para redes sociales (minimizamos JS) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-Sxl6qF1F0S9Yz9o6w3o1yYlU5m5k/F5m9y3bFJt8YjQyLw3a0Q4q3q1sF9xqZ0S1V6oU0Hkqf3QeQw2mV4l9A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Open Graph para redes sociales -->
  <meta property="og:title" content="Super Market El Esparragal" />
  <meta property="og:description" content="Frescura y calidad para tu familia. Servicio de recogida de paquetes y las mejores marcas. Ahora con ofertas semanales y modo oscuro." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="logo_supermarket_web.png" />
  <meta name="theme-color" content="#27ae60" />

  <style>
    :root{
      /* Paleta de colores base */
      --green:#27ae60; --green-2:#2ecc71; --bg:#ffffff; --text:#1c1c1c; --muted:#34495e; --shadow:0 12px 30px rgba(0,0,0,.08);
      --radius:20px;
      --accent:#ffeb3b;
    }


    /* Reset + base */
    *{margin:0;padding:0;box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{font-family:'Poppins',sans-serif;background:linear-gradient(180deg,#f3fbf6 0%,#fff 100%);color:var(--text);overflow-x:hidden;padding-bottom:140px;transition:background .3s ease,color .3s ease}
    body.dark-mode{background:linear-gradient(180deg,#1a1f24 0%,#263238 100%)}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}

    /* Scrollbar (webkit) */
    ::-webkit-scrollbar{width:8px}
    ::-webkit-scrollbar-track{background:#a0d293}
    ::-webkit-scrollbar-thumb{background:var(--green);border-radius:10px}

    /* Accesibilidad focus visible */
    :focus-visible{outline:3px solid var(--green-2);outline-offset:3px;border-radius:8px}

    /* HERO */
    header.hero{height:100vh;position:relative;display:flex;align-items:center;justify-content:center;text-align:center;background:var(--bg);color:var(--text)}
    .hero-content{max-width:900px;padding:0 2rem;animation:fadeInUp 1.2s ease forwards}
    .hero-content h1{font-weight:800;font-size:4.5rem;letter-spacing:.15rem;margin-bottom:.8rem;text-shadow:0 3px 15px rgba(0,0,0,.07)}
    .hero-content h1 span{color:var(--accent);text-shadow:0 0 8px var(--accent)}
    .hero-content p{font-weight:300;font-size:1.5rem;margin-bottom:2rem;color:var(--muted)}
    .btn{background:var(--green);color:#fff;border-radius:12px;padding:1rem 2.2rem;font-size:1rem;font-weight:600;box-shadow:0 5px 15px rgba(39,174,96,.3);transition:transform .2s ease,box-shadow .2s ease}
    .btn:hover{transform:translateY(-3px);box-shadow:0 8px 20px rgba(39,174,96,.5)}
    .hero-logo{max-width:820px;width:100%;height:auto;margin:0 auto 1.5rem;animation:fadeInUp 1.2s ease forwards}

    /* SECCIONES */
    section{max-width:1000px;margin:5rem auto;background:rgba(255,255,255,.92);border-radius:var(--radius);padding:3rem 2rem 4rem;box-shadow:var(--shadow);animation:fadeInUp 1s ease forwards;transition:background .3s ease,color .3s ease}
    h2.section-title{font-size:2.5rem;font-weight:800;color:var(--green);margin-bottom:2rem;text-align:center;letter-spacing:.08rem;text-transform:uppercase;display:block;position:relative}

    /* Iconos en títulos */
    .section-title .section-icon{display:block;font-size:2.5rem;margin-bottom:10px;color:var(--green);text-shadow:0 2px 8px rgba(0,0,0,0.15)}

    /* Nosotros */
    .nosotros p{font-weight:400;font-size:1.15rem;color:#2c3e50;line-height:1.7;max-width:720px;margin:0 auto;text-align:center}

    /* Grid productos (4 por línea, imágenes cuadradas en contenedor) */
    #productos{max-width:1100px;margin:5rem auto;background:rgba(255,255,255,.92);border-radius:var(--radius);padding:3rem 2rem 3.5rem;box-shadow:var(--shadow);transition:background .3s ease}
    #productos .section-title{font-size:2.2rem;margin-bottom:1.6rem}
    .search-container{max-width:500px;margin:0 auto 2rem;position:relative}
    .search-container input{width:100%;padding:0.9rem 1.3rem;font-size:1rem;border:2px solid var(--green);border-radius:30px;transition:border-color .3s ease;background:var(--bg);color:var(--text)}
    .search-container input:focus{border-color:var(--green-2)}
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:1.25rem}
    @media (max-width:1024px){.grid{grid-template-columns:repeat(3,1fr)}}
    @media (max-width:768px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:480px){.grid{grid-template-columns:1fr}}
    .card{background:rgba(255,255,255,.98);border-radius:16px;overflow:hidden;cursor:pointer;box-shadow:0 10px 15px rgba(0,0,0,.06);transition:transform .3s,box-shadow .3s;border-top:4px solid var(--green)}
    .card:hover{transform:translateY(-10px) scale(1.02);box-shadow:0 20px 30px rgba(0,0,0,.12)}
    .card img{width:100%;aspect-ratio:1/1;object-fit:cover;object-position:center;border-bottom:5px solid var(--green)}
    .card h3{font-weight:700;font-size:1.05rem;padding:.75rem;color:var(--green);text-align:center}
    .card p{font-weight:300;font-size:.9rem;padding:0 .75rem 1rem;color:var(--muted);text-align:center}

    /* Drawer de listado de productos por categoría */
    .drawer{position:fixed;inset:0;display:none;background:rgba(0,0,0,.45);backdrop-filter:blur(3px);z-index:10050}
    .drawer[aria-hidden="false"]{display:block}
    .drawer-panel{position:absolute;left:0;top:0;height:100%;width:min(700px,94%);background:#fff;border-radius:0 var(--radius) var(--radius) 0;box-shadow:0 10px 30px rgba(0,0,0,.25);padding:1.25rem 1.25rem 1.75rem;overflow:auto}
    .drawer-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem}
    .drawer-title{font-size:1.35rem;color:var(--green);font-weight:800}
    .drawer-close{border:none;background:var(--green);color:#fff;border-radius:999px;width:40px;height:40px;font-size:1.1rem;cursor:pointer}
    .drawer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    @media (max-width:720px){.drawer-grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:480px){.drawer-grid{grid-template-columns:1fr}}
    .prod-item{border:1px solid #e8f5ec;border-radius:14px;overflow:hidden;background:rgba(255,255,255,.98);box-shadow:0 6px 14px rgba(0,0,0,.06);cursor:pointer}
    .prod-item img{width:100%;aspect-ratio:1/1;object-fit:cover;border-bottom:4px solid var(--green)}
    .prod-item h4{font-size:1rem;color:var(--green);padding:.5rem .65rem}
    .prod-item p{font-size:.85rem;color:var(--muted);padding:0 .65rem .8rem}

    /* Modal de producto */
    .modal{display:none;position:fixed;inset:0;background:rgba(39,174,96,.8);backdrop-filter:blur(6px);z-index:10100;justify-content:center;align-items:center;transition:opacity .3s ease}
    .modal[aria-hidden="false"]{display:flex}
    .modal-content{background:#fff;border-radius:var(--radius);max-width:560px;width:92%;padding:22px;position:relative;text-align:left;box-shadow:0 15px 35px rgba(0,0,0,.2);}
    .modal-content img{width:100%;height:auto;aspect-ratio:4/3;object-fit:cover;border-radius:15px;margin-bottom:15px;background:rgba(39,174,96,.08)}
    .modal-content h3{color:var(--green);margin-bottom:6px;font-size:1.4rem}
    .modal-content p{color:var(--muted);font-weight:300;line-height:1.45}
    .close{position:absolute;top:15px;right:20px;color:#fff;font-size:22px;font-weight:700;cursor:pointer;background:rgba(39,174,96,.95);border-radius:50%;width:40px;height:40px;text-align:center;line-height:40px;}
    #prev,#next{position:absolute;top:50%;font-size:28px;background:none;border:none;color:var(--green);cursor:pointer;transform:translateY(-50%)}
    #prev{left:10px} #next{right:10px}

    /* Opciones en el modal */
    .options{margin-top:12px;display:grid;gap:12px}
    .option-group label{display:block;font-weight:700;color:#2c3e50;margin-bottom:.35rem}
    .option-group select,.option-group input[type="number"]{width:100%;padding:.7rem 1rem;border:2px solid var(--green);border-radius:12px;background:var(--bg);color:var(--text);font-family:'Poppins',sans-serif}
    .qty-row{display:flex;gap:10px}
    .qty-row input{max-width:120px}
    .cta-row{margin-top:10px;display:flex;gap:10px;flex-wrap:wrap}
    .btn-ghost{background:#fff;border:2px solid var(--green);color:var(--green);border-radius:12px;padding:.9rem 1.4rem;font-weight:700;cursor:pointer}

    /* Recogida */
    .recogida{text-align:center;color:var(--green)}
    .recogida p{font-size:1.2rem;font-weight:500;max-width:700px;margin:0 auto 2rem;line-height:1.5;color:var(--muted)}
    .recogida .icono{font-size:4rem;margin-bottom:1rem;color:var(--green);filter:drop-shadow(0 0 4px var(--green));animation:bounce 2s infinite ease-in-out}
    .recogida .btn-recogida{cursor:pointer;background:var(--green);color:#fff;border-radius:12px;padding:1rem 2.2rem;font-size:1rem;font-weight:600;box-shadow:0 5px 15px rgba(39,174,96,.3);border:none}
    .recogida .btn-recogida:hover{transform:translateY(-3px);box-shadow:0 8px 20px rgba(39,174,96,.5)}

    /* Contacto */
    form{max-width:480px;margin:0 auto;display:flex;flex-direction:column;gap:1.25rem}
    .input-group{position:relative;display:flex;align-items:center}
    .input-group input,.input-group textarea{padding:.9rem 1.3rem;font-size:1rem;border:2px solid var(--green);border-radius:30px;font-family:'Poppins',sans-serif;transition:border-color .3s ease;width:100%;background:var(--bg);color:var(--text)}
    .input-group input:focus,.input-group textarea:focus{border-color:var(--green-2)}
    .input-group textarea{resize:vertical;min-height:120px}
    button[type="submit"], .btn{cursor:pointer}

    /* Menú inferior */
    nav.menu-inferior{position:fixed;bottom:0;left:0;width:100%;height:75px;background:var(--green);box-shadow:0 -6px 15px rgba(0,0,0,.2);display:flex;justify-content:space-around;align-items:center;color:#fff;z-index:9999;transition:background .3s ease}
    nav.menu-inferior a.menu-item{flex:1;text-align:center;font-weight:700;font-size:.85rem;color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:5px;padding:8px 0 4px;transition:color .3s ease}
    nav.menu-inferior a.menu-item .icon{font-size:1.5rem;line-height:1;transition:transform .3s ease}
    nav.menu-inferior a.menu-item.active,nav.menu-inferior a.menu-item:hover{color:var(--accent)}
    nav.menu-inferior a.menu-item.active .icon,nav.menu-inferior a.menu-item:hover .icon{transform:scale(1.2)}
    @media (max-width:520px){nav.menu-inferior{height:65px} nav.menu-inferior a.menu-item span{font-size:.75rem}}

    /* Footer */
    footer{max-width:1000px;margin:3rem auto;text-align:center;font-size:.95rem;color:#444;transition:color .3s ease}
    footer .social{margin-bottom:.8rem}
    footer .social a{color:var(--green);margin:0 12px;font-size:1.3rem;transition:color .25s ease}
    footer .social a:hover{color:var(--green-2)}

    /* Testimonios */
    #testimonios{background:var(--bg);padding:50px 20px;text-align:center;transition:background .3s ease}
    #testimonios .section-title{color:var(--green)}
    .google-reviews{display:flex;flex-wrap:wrap;justify-content:center;gap:30px}
    .review{background:rgba(255,255,255,.9);border-radius:var(--radius);box-shadow:0 8px 15px rgba(0,0,0,.08);padding:25px 30px;max-width:300px;transition:transform .3s ease,box-shadow .3s ease;border-left:6px solid var(--green)}
    .review:hover{transform:translateY(-8px);box-shadow:0 18px 25px rgba(0,0,0,.15)}
    .review-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}
    .review-header strong{color:var(--green);font-weight:700}
    .stars{color:#ffc107;font-size:1.1em}
    .review p{font-style:italic;color:#3f4a59}

    /* Marcas carrusel */
    #marcas{background:var(--bg);padding:50px 20px;text-align:center;transition:background .3s ease}
    .marcas-carrusel{overflow:hidden;position:relative;width:100%}
    .marcas-track{display:flex;gap:40px;animation:scroll 20s linear infinite}
    .marca{flex:0 0 auto;width:150px;height:100px;display:flex;align-items:center;justify-content:center;transition:transform .3s ease}
    .marca img{width:100%;height:100%;object-fit:contain;filter:drop-shadow(0 2px 4px rgba(0,0,0,.15))}
    .marca:hover{transform:scale(1.08)}
    @keyframes scroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

    /* Top bar */
    .top-bar{position:fixed;top:-60px;left:0;width:100%;height:60px;background:var(--green);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:1rem;box-shadow:0 4px 10px rgba(0,0,0,.1);z-index:10000;transition:top .3s ease}
    .schedule-icon{margin-right:8px;font-size:1.3rem;line-height:1}

    /* Botones flotantes */
    .back-to-top{position:fixed;right:20px;bottom:100px;width:45px;height:45px;border:none;border-radius:50%;background:var(--green);color:#fff;font-size:1.2rem;display:none;align-items:center;justify-content:center;box-shadow:0 4px 10px rgba(0,0,0,.2);cursor:pointer;z-index:10000}
    .back-to-top:hover{transform:translateY(-3px);box-shadow:0 8px 20px rgba(0,0,0,.3)}
    .floating-whatsapp{position:fixed;right:20px;bottom:160px;width:55px;height:55px;background:#25D366;color:#fff;border-radius:50%;display:flex;justify-content:center;align-items:center;font-size:1.6rem;z-index:10000;box-shadow:0 4px 10px rgba(0,0,0,.2)}
    .floating-whatsapp:hover{transform:translateY(-3px);box-shadow:0 8px 20px rgba(0,0,0,.3)}

    /* Animaciones */
    @keyframes fadeInUp{from{opacity:0;transform:translateY(25px)}to{opacity:1;transform:translateY(0)}}
    @keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}

    /* Reduce motion */
    @media (prefers-reduced-motion:reduce){
      *{animation:none !important;transition:none !important}
      html{scroll-behavior:auto}
    }

    /* Ajustes globales para pantallas pequeñas */
    @media (max-width:520px){
      header.hero .hero-content h1{font-size:3rem}
      section{margin:3rem 1rem 4rem;padding:2rem 1rem 3rem}
    }
  </style>
</head>
<body>

  <!-- Barra superior con horario -->
  <div id="top-bar" class="top-bar" aria-live="polite">
    <span class="schedule-icon" aria-hidden="true">⏰</span>
    <span>Lunes a Sábado 8:00–21:00 | Domingos: Cerrado</span>
  </div>

  <!-- HERO -->
  <header class="hero" id="inicio" role="banner" aria-label="Bienvenida Super Market El Esparragal">
    <div class="hero-content">
      <img src="logo_supermarket_web.png" alt="Super Market El Esparragal" class="hero-logo" width="820" height="320" loading="eager" />
      <p>Comprometidos con la frescura y calidad en cada producto para ti y tu familia.</p>
      <a href="#productos" class="btn" aria-label="Ver nuestros productos">Ver Productos</a>
    </div>
  </header>

  <!-- MARCAS -->
  <section id="marcas" aria-labelledby="marcas-title">
    <h2 id="marcas-title" class="section-title"><span class="section-icon" aria-hidden="true">🏷️</span>Nuestras Marcas</h2>
    <div class="marcas-carrusel" aria-hidden="true">
      <div class="marcas-track">
        <div class="marca"><img src="Coca-Cola.png" alt="Coca Cola" loading="lazy" width="150" height="80"></div>
        <div class="marca"><img src="nestle.png" alt="Nestlé" loading="lazy" width="150" height="80"></div>
        <div class="marca"><img src="heineken.png" alt="Heineken" loading="lazy" width="150" height="80"></div>
        <div class="marca"><img src="Fanta.png" alt="Fanta" loading="lazy" width="150" height="80"></div>
        <div class="marca"><img src="kraft.png" alt="Kraft" loading="lazy" width="150" height="80"></div>
        <!-- Repetición para efecto infinito -->
        <div class="marca"><img src="Corona.png" alt="Corona" loading="lazy" width="150" height="80"></div>
        <div class="marca"><img src="Pepsi.png" alt="Pepsi" loading="lazy" width="150" height="80"></div>
        <div class="marca"><img src="Monster.png" alt="Monster" loading="lazy" width="150" height="80"></div>
        <div class="marca"><img src="Aquarius.png" alt="Aquarius" loading="lazy" width="150" height="80"></div>
        <div class="marca"><img src="Nutella.png" alt="Nutella" loading="lazy" width="150" height="80"></div>
      </div>
    </div>
  </section>

  <!-- NOSOTROS -->
  <section class="nosotros" id="nosotros" aria-labelledby="nosotros-title">
    <h2 id="nosotros-title" class="section-title"><span class="section-icon" aria-hidden="true">🥦</span>¿Quiénes Somos?</h2>
    <p>Somos un mini supermercado comprometido con la frescura y calidad de cada producto. Nuestra selección de frutas, verduras, panadería y más está pensada para que tu familia disfrute salud y sabor en cada comida.</p>
  </section>

  <!-- PRODUCTOS (CATEGORÍAS) -->
  <section id="productos" aria-labelledby="productos-title">
    <h2 id="productos-title" class="section-title"><span class="section-icon" aria-hidden="true">🛒</span>Nuestros Productos</h2>
    <!-- Buscador para filtrar categorías y productos -->
    <div class="search-container">
      <input type="search" id="searchInput" placeholder="Buscar productos o categorías..." aria-label="Buscar productos" />
    </div>
    <div class="grid" role="list">
      <article class="card" data-category="frutas" role="listitem" tabindex="0"><img src="Frutas.png" alt="Frutas y Verduras" loading="lazy"/><h3>Frutas y Verduras</h3><p>Haz click para ver todos los productos</p></article>
      <article class="card" data-category="embutidos" role="listitem" tabindex="0"><img src="Embutidos.png" alt="Embutidos" loading="lazy"/><h3>Embutidos</h3><p>Haz click para ver todos los productos</p></article>
      <article class="card" data-category="lacteos" role="listitem" tabindex="0"><img src="huevos.png" alt="Lácteos y Huevos" loading="lazy"/><h3>Lácteos y Huevos</h3><p>Haz click para ver todos los productos</p></article>
      <article class="card" data-category="panaderia" role="listitem" tabindex="0"><img src="Panaderia.png" alt="Panadería y Pastelería" loading="lazy"/><h3>Snacks y Bollería</h3><p>Haz click para ver todos los productos</p></article>
      <article class="card" data-category="bebidas" role="listitem" tabindex="0"><img src="bebidas.png" alt="Refrescos" loading="lazy"/><h3>Refrescos</h3><p>Haz click para ver todos los productos</p></article>
       <article class="card" data-category="zumos" role="listitem" tabindex="0"><img src="zumos.png" alt="Zumos" loading="lazy"/><h3>Zumos</h3><p>Haz click para ver todos los productos</p></article>
      <article class="card" data-category="congelados" role="listitem" tabindex="0"><img src="congelados.png" alt="Congelados" loading="lazy"/><h3>Congelados</h3><p>Haz click para ver todos los productos</p></article>
     <article class="card" data-category="helados" role="listitem" tabindex="0">
  <img src="https://images.unsplash.com/photo-1508737027454-e6454ef45afd?auto=format&fit=crop&w=800&q=80" alt="Helados" loading="lazy"/>
  <h3>Helados</h3>
  <p>Haz click para ver todos los productos</p>
</article>

      <article class="card" data-category="higiene" role="listitem" tabindex="0"><img src="cuidado.png" alt="Higiene y Cuidado Personal" loading="lazy"/><h3>Higiene y Cuidado Personal</h3><p>Haz click para ver todos los productos</p></article>
      <article class="card" data-category="limpieza" role="listitem" tabindex="0"><img src="limpieza.png" alt="Limpieza y Hogar" loading="lazy"/><h3>Limpieza y Hogar</h3><p>Haz click para ver todos los productos</p></article>
      
      <article class="card" data-category="mascotas" role="listitem" tabindex="0"><img src="mascotas.png" alt="Mascotas" loading="lazy"/><h3>Mascotas</h3><p>Haz click para ver todos los productos</p></article>
      <article class="card" data-category="barbacoa" role="listitem" tabindex="0"><img src="barbacoa.png" alt="Barbacoa" loading="lazy"/><h3>Barbacoa</h3><p>Haz click para ver todos los productos</p></article>
    </div>
  </section>

  <!-- DRAWER: LISTADO DE PRODUCTOS DE LA CATEGORÍA -->
  <div id="productDrawer" class="drawer" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="drawerTitle">
    <div class="drawer-panel" role="document">
      <div class="drawer-header">
        <h3 id="drawerTitle" class="drawer-title">Listado</h3>
        <button id="drawerClose" class="drawer-close" aria-label="Cerrar listado">✕</button>
      </div>
      <div id="drawerGrid" class="drawer-grid" role="list"></div>
    </div>
  </div>

  <!-- MODAL DE PRODUCTO -->
  <div id="categoryModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalDesc">
    <div class="modal-content">
      <button class="close" aria-label="Cerrar ventana">&times;</button>
      <button id="prev" aria-label="Producto anterior">&#10094;</button>
      <img id="modalImg" src="" alt="Producto" loading="lazy" />
      <h3 id="modalTitle"></h3>
      <p id="modalDesc"></p>

      <!-- Opciones dinámicas -->
      <div id="optionsContainer" class="options" aria-live="polite"></div>
      <div class="cta-row">
        <button id="addBtn" class="btn" aria-label="Añadir al carrito">Añadir</button>
        <button id="favBtn" class="btn-ghost" aria-label="Guardar como favorito">❤ Favorito</button>
      </div>

      <button id="next" aria-label="Producto siguiente">&#10095;</button>
    </div>
  </div>

  <!-- RECOGIDA PAQUETES -->
  <section id="recogida" class="recogida" aria-labelledby="recogida-title">
    <h2 id="recogida-title" class="section-title"><span class="section-icon" aria-hidden="true">📦</span>Servicio de Recogida de Paquetes</h2>
    <div class="icono" aria-hidden="true"><i class="fas fa-box-open"></i></div>
    <p>Deja tu paquete con nosotros por solo <strong>1€</strong> y nosotros nos encargamos de recogerlo y entregarlo donde necesites.</p>
    <button class="btn-recogida" aria-label="Contactar para recogida de paquete" onclick="document.getElementById('contacto').scrollIntoView({behavior: 'smooth'})">Contactar ahora</button>
  </section>

  <!-- MENÚ INFERIOR -->
  <nav class="menu-inferior" role="navigation" aria-label="Menú inferior">
    <a href="#inicio" class="menu-item active" aria-current="page" tabindex="0" aria-label="Inicio"><span class="icon" aria-hidden="true">🏠</span><span>Inicio</span></a>
    <a href="#productos" class="menu-item" tabindex="0" aria-label="Productos"><span class="icon" aria-hidden="true">🛒</span><span>Productos</span></a>
    <a href="#recogida" class="menu-item" tabindex="0" aria-label="Servicio de recogida de paquetes"><span class="icon" aria-hidden="true">📦</span><span>Recogida</span></a>
    <a href="#contacto" class="menu-item" tabindex="0" aria-label="Contacto"><span class="icon" aria-hidden="true">✉️</span><span>Contacto</span></a>
  </nav>

  <!-- TESTIMONIOS -->
  <section id="testimonios" class="nosotros" aria-labelledby="testimonios-title">
    <h2 id="testimonios-title" class="section-title"><span class="section-icon" aria-hidden="true">⭐</span>Lo Que Dicen Nuestros Clientes</h2>
    <div class="google-reviews">
      <div class="review"><div class="review-header"><strong>María G.</strong><span class="stars" aria-label="5 estrellas">⭐⭐⭐⭐⭐</span></div><p>"Siempre encuentro productos frescos y de calidad, y la atención es excelente."</p></div>
      <div class="review"><div class="review-header"><strong>Carlos P.</strong><span class="stars" aria-label="5 estrellas">⭐⭐⭐⭐⭐</span></div><p>"Me encantan las ofertas semanales, ¡ahorro mucho!"</p></div>
      <div class="review"><div class="review-header"><strong>Ana R.</strong><span class="stars" aria-label="5 estrellas">⭐⭐⭐⭐⭐</span></div><p>"El servicio de recogida de paquetes es muy práctico y rápido."</p></div>
    </div>
  </section>

  <!-- UBICACIÓN -->
  <section id="ubicacion" class="nosotros" aria-labelledby="ubicacion-title">
    <h2 id="ubicacion-title" class="section-title"><span class="section-icon" aria-hidden="true">📍</span>Dónde Estamos</h2>
    <p>Visítanos en Calle Principal 123, El Esparragal.</p>
    <div style="margin-top:1rem;text-align:center;aspect-ratio:16/9;max-width:1000px;margin-inline:auto;">
      <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d51279.572897802165!2d-4.734110158936548!3d36.55475657395956!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd72e10030256a01%3A0xd4fe9c4b14fde4c3!2sSuper%20market%20el%20esparragal!5e0!3m2!1ses!2ses!4v1755084240642!5m2!1ses!2ses" width="100%" height="500" style="border-radius:20px;border:0" allowfullscreen loading="lazy" referrerpolicy="no-referrer-when-downgrade" title="Mapa Super Market El Esparragal"></iframe>
    </div>
  </section>

  <!-- CONTACTO -->
  <section id="contacto" class="contacto" aria-labelledby="contacto-title">
    <h2 id="contacto-title" class="section-title"><span class="section-icon" aria-hidden="true">✉️</span>Contacto</h2>
    <p>¿Tienes alguna duda o quieres visitarnos? Escríbenos o llámanos.</p>
    <div class="contact-info">
      <p>📞&nbsp; <a href="tel:+34123456789" rel="nofollow">+34&nbsp;123&nbsp;456&nbsp;789</a></p>
      <p>📧&nbsp; <a href="mailto:info@supermarket.com">info@supermarket.com</a></p>
      <p>📍&nbsp; Calle Principal&nbsp;123, El&nbsp;Esparragal</p>
    </div>
    <form id="contactForm" novalidate>
      <div class="input-group"><input type="text" id="nombre" name="nombre" placeholder="👤 Nombre" required aria-required="true" aria-label="Nombre" autocomplete="name" /></div>
      <div class="input-group"><input type="email" id="email" name="email" placeholder="📧 Correo electrónico" required aria-required="true" aria-label="Correo electrónico" autocomplete="email" /></div>
      <div class="input-group"><textarea id="mensaje" name="mensaje" placeholder="📝 Mensaje" required aria-required="true" aria-label="Mensaje"></textarea></div>
      <button type="submit" aria-label="Enviar mensaje" class="btn">Enviar</button>
    </form>
  </section>

  <!-- FOOTER -->
  <footer>
    <div class="social" role="contentinfo" aria-label="Redes sociales">
      <a href="#" aria-label="Facebook" target="_blank" rel="noopener noreferrer"><i class="fab fa-facebook-f"></i></a>
      <a href="#" aria-label="Twitter" target="_blank" rel="noopener noreferrer"><i class="fab fa-x-twitter"></i></a>
      <a href="#" aria-label="Instagram" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram"></i></a>
    </div>
    <p>Mini Super El Fresco © 2025. Todos los derechos reservados.</p>
  </footer>

  <!-- Botón volver arriba -->
  <button id="backToTop" class="back-to-top" aria-label="Volver arriba" title="Volver arriba">↑</button>

  <!-- WhatsApp -->
  <a href="https://wa.me/34123456789" class="floating-whatsapp" aria-label="Chatea con nosotros en WhatsApp" target="_blank" rel="noopener noreferrer" title="WhatsApp">💬</a>

  <!-- Datos estructurados mínimos -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"GroceryStore",
    "name":"Super Market El Esparragal",
    "image":"logo_supermarket_web.png",
    "address":{"@type":"PostalAddress","streetAddress":"Calle Principal 123","addressLocality":"El Esparragal","addressCountry":"ES"},
    "openingHours":"Mo-Sa 08:00-21:00",
    "priceRange":"€",
    "telephone":"+34 123 456 789"
  }
  </script>

  <script>
    // Utilidades cortas
    const $ = (sel, ctx=document) => ctx.querySelector(sel);
    const $$ = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));

    /* -------------------- Menú inferior activo por scroll -------------------- */
    const menuItems = $$('.menu-inferior a');
    const sections = menuItems.map(link => ({link, el: document.querySelector(link.getAttribute('href'))})).filter(s=>s.el);
    let ticking = false;
    const onScroll = () => {
      if (!ticking){
        window.requestAnimationFrame(() => {
          const scrollPos = window.scrollY + window.innerHeight / 3;
          sections.forEach(({link, el}) => {
            const top = el.offsetTop, bottom = top + el.offsetHeight;
            if (top <= scrollPos && bottom > scrollPos){
              menuItems.forEach(i => i.classList.remove('active'));
              link.classList.add('active');
            }
          });
          ticking = false;
        });
        ticking = true;
      }
    };
    window.addEventListener('scroll', onScroll, {passive:true});

    /* -------------------- Datos de productos por categoría -------------------- */
    // Ahora cada producto puede definir opciones personalizadas
    // tipos de opciones soportadas: select (lista), qty (número)
    const productosPorCategoria = {
      // Esta estructura se puede reemplazar por datos dinámicos generados por el CMS
    };

    /* -------------------- Drawer (listado por categoría) -------------------- */
    const drawer = $('#productDrawer');
    const drawerGrid = $('#drawerGrid');
    const drawerTitle = $('#drawerTitle');
    const drawerClose = $('#drawerClose');

    let currentCategoryKey = null; // clave de la categoría activa

    function openDrawer(catKey, triggerEl){
      currentCategoryKey = catKey;
      const list = productosPorCategoria[catKey] || [];
      drawerTitle.textContent = `${getCategoryName(catKey)} · ${list.length} productos`;
      drawerGrid.innerHTML = '';
      list.forEach((p, idx)=>{
        const item = document.createElement('article');
        item.className = 'prod-item';
        item.setAttribute('role','listitem');
        item.tabIndex = 0;
        item.innerHTML = `
          <img src="${p.img}" alt="${p.title}">
          <h4>${p.title}</h4>
          <p>${p.desc || ''}</p>
        `;
        item.addEventListener('click', ()=>{
          currentCategory = productosPorCategoria[catKey];
          currentIndex = idx;
          openModal(item);
        });
        item.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); item.click(); } });
        drawerGrid.appendChild(item);
      });
      drawer.setAttribute('aria-hidden','false');
      document.body.style.overflow='hidden';
      drawerClose.focus();
    }

    function closeDrawer(){
      drawer.setAttribute('aria-hidden','true');
      document.body.style.overflow='';
    }

    drawerClose.addEventListener('click', closeDrawer);
    drawer.addEventListener('click', (e)=>{ if(e.target===drawer) closeDrawer(); });

    function getCategoryName(key){
      const card = document.querySelector(`.card[data-category="${key}"] h3`);
      return card ? card.textContent.trim() : key;
    }

    /* -------------------- Modal de producto -------------------- */
    const modal = $('#categoryModal');
    const modalImg = $('#modalImg');
    const modalTitle = $('#modalTitle');
    const modalDesc = $('#modalDesc');
    const optionsContainer = $('#optionsContainer');
    const closeBtn = modal.querySelector('.close');
    const prevBtn = $('#prev');
    const nextBtn = $('#next');
    const addBtn = $('#addBtn');
    let currentCategory = [];
    let currentIndex = 0;
    let lastFocus = null;

    function buildOptionsUI(product){
      optionsContainer.innerHTML = '';
      const opts = product.options || [];
      opts.forEach(opt =>{
        const wrap = document.createElement('div');
        wrap.className = 'option-group';
        const id = `${product.title.replace(/\s+/g,'-').toLowerCase()}-${opt.name.replace(/\s+/g,'-').toLowerCase()}`;
        const label = document.createElement('label');
        label.htmlFor = id;
        label.textContent = opt.name;
        wrap.appendChild(label);
        if(opt.type==='qty'){
          const input = document.createElement('input');
          input.type = 'number';
          input.min = '1';
          input.step = '1';
          input.value = '1';
          input.id = id;
          wrap.appendChild(input);
        } else { // select por defecto
          const sel = document.createElement('select');
          sel.id = id;
          (opt.values||[]).forEach(v=>{
            const o = document.createElement('option');
            o.value = v; o.textContent = v; sel.appendChild(o);
          });
          wrap.appendChild(sel);
        }
        optionsContainer.appendChild(wrap);
      });
    }

    function readSelectedOptions(){
      const result = {};
      optionsContainer.querySelectorAll('.option-group').forEach(group=>{
        const label = group.querySelector('label').textContent.trim();
        const input = group.querySelector('select, input');
        result[label] = input.value;
      });
      return result;
    }

    function showProduct(index){
      const product = currentCategory[index];
      if (!product) return;
      modalImg.src = product.img;
      modalTitle.textContent = product.title;
      modalDesc.textContent = product.desc || '';
      buildOptionsUI(product);
    }

    function openModal(triggerEl){
      lastFocus = triggerEl || document.activeElement;
      modal.setAttribute('aria-hidden','false');
      document.body.style.overflow = 'hidden';
      showProduct(currentIndex);
      closeBtn.focus();
    }

    function closeModal(){
      modal.setAttribute('aria-hidden','true');
      document.body.style.overflow = '';
      if (lastFocus) lastFocus.focus();
    }

    prevBtn.addEventListener('click', ()=>{ currentIndex = (currentIndex - 1 + currentCategory.length) % currentCategory.length; showProduct(currentIndex); });
    nextBtn.addEventListener('click', ()=>{ currentIndex = (currentIndex + 1) % currentCategory.length; showProduct(currentIndex); });
    closeBtn.addEventListener('click', closeModal);
    window.addEventListener('click', e=>{ if(e.target===modal) closeModal(); });
    window.addEventListener('keydown', (e)=>{
      if (modal.getAttribute('aria-hidden')==='false'){
        if (e.key==='Escape') closeModal();
        if (e.key==='ArrowRight') nextBtn.click();
        if (e.key==='ArrowLeft') prevBtn.click();
      }
    });

    addBtn.addEventListener('click', ()=>{
      const opts = readSelectedOptions();
      const p = currentCategory[currentIndex];
      // Aquí podrías enviar estos datos a tu carrito / backend
      alert(`Añadido: ${p.title}\nOpciones: ${JSON.stringify(opts, null, 2)}`);
    });

    /* -------------------- Interacción en las tarjetas de CATEGORÍAS -------------------- */
    $$('.card').forEach(el => {
      const open = () => {
        const cat = el.dataset.category;
        if (!productosPorCategoria[cat]) return;
        openDrawer(cat, el);
      };
      el.addEventListener('click', open);
      el.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); open(); } });
    });

    /* -------------------- Filtrado de categorías (y productos) -------------------- */
    const searchInput = $('#searchInput');
    if (searchInput){
      searchInput.addEventListener('input', () => {
        const query = searchInput.value.trim().toLowerCase();
        // si hay texto, mostramos categorías que coinciden por nombre o por productos dentro
        $$('.card').forEach(card => {
          const categoryKey = card.dataset.category;
          const categoryName = card.querySelector('h3').textContent.toLowerCase();
          let match = false;
          if (query === '') {
            match = true;
          } else {
            if (categoryName.includes(query)) match = true;
            if (!match && productosPorCategoria[categoryKey]){
              match = productosPorCategoria[categoryKey].some(prod => {
                return prod.title.toLowerCase().includes(query) || (prod.desc && prod.desc.toLowerCase().includes(query));
              });
            }
          }
          card.style.display = match ? '' : 'none';
        });
      });
    }

    /* -------------------- Validación simple del formulario de contacto -------------------- */
    const form = $('#contactForm');
    if(form){
      form.addEventListener('submit', (e) => {
        e.preventDefault();
        const nombre = $('#nombre').value.trim();
        const email = $('#email').value.trim();
        const mensaje = $('#mensaje').value.trim();
        if(!nombre || !email || !mensaje){ alert('Por favor, completa todos los campos.'); return; }
        if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)){ alert('Por favor, introduce un correo válido.'); return; }
        alert('¡Gracias por contactarnos, ' + nombre + '! Te responderemos pronto.');
        form.reset();
      });
    }

    /* -------------------- Barra superior animada -------------------- */
    const topBar = $('#top-bar');
    if (topBar){
      window.addEventListener('scroll', () => { topBar.style.top = (window.scrollY > 150) ? '0' : '-60px'; }, {passive:true});
    }

    /* -------------------- Botón volver arriba -------------------- */
    const backToTopBtn = $('#backToTop');
    if (backToTopBtn){
      window.addEventListener('scroll', () => { backToTopBtn.style.display = (window.scrollY > 400) ? 'flex' : 'none'; }, {passive:true});
      backToTopBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
    }
  </script>
</body>
</html>